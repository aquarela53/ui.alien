(function(){var global=(typeof global==="undefined")?window:global;if(!global.console){global.console={assert:function(){},constructor:function(){},count:function(){},debug:function(){},dir:function(){},dirxml:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},profile:function(){},profileEnd:function(){},time:function(){},timeEnd:function(){},trace:function(){},warn:function(){}}}if(typeof document!=="undefined"){document.qry=function(k){k=k.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+k+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(global.location.href);if(results==null){return""}else{return results[1]}}}Number.prototype.toDecimalFormat=function(f){var c,d,t;var n=this,c=isNaN(c=Math.abs(c))?2:c,d=d==undefined?".":d,t=t==undefined?",":t,s=n<0?"-":"",i=parseInt(n=Math.abs(+n||0).toFixed(c))+"",j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+((f===false)?"":(c?d+Math.abs(n-i).toFixed(c).slice(2):""))};Number.prototype.zf=function(len){return this.toString().zf(len)};String.prototype.toDecimalFormat=function(f){var n=parseInt(this);if(!n){return null}return n.toDecimalFormat(f)};String.prototype.isKoreanOnly=function(){for(var i=0;i<this.length;i++){var c=this.charCodeAt(i);if(!((44032<=c&&c<=55203)||(12593<=c&&c<=12686))){return false}}return true};String.prototype.isEnglishAndDigit=function(){for(var i=0;i<this.length;i++){var c=this.charCodeAt(i);if(!((97<=c&&c<=122)||(65<=c&&c<=90)||(48<=c&&c<=57))){return false}}return true};String.prototype.isEnglishOnly=function(){for(var i=0;i<this.length;i++){var c=this.charCodeAt(i);if(!((97<=c&&c<=122)||(65<=c&&c<=90))){return false}}return true};String.prototype.isDigitOnly=function(){return !(/[^0-9]/i).test(this)};if(!String.prototype.ltrim){String.prototype.ltrim=function(){return this.replace(/(^ *)/g,"")}}if(!String.prototype.rtrim){String.prototype.rtrim=function(){return this.replace(/( *$)/g,"")}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/(^ *)|( *$)/g,"")}}if(!String.prototype.startsWith){String.prototype.startsWith=function(s){if(!s){return false}return(this.indexOf(s)==0)}}if(!String.prototype.endsWith){String.prototype.endsWith=function(s){if(!s){return false}return this.indexOf(s,this.length-s.length)!==-1}}if(!String.prototype.replaceAll){String.prototype.replaceAll=function(find,replace){return this.replace(new RegExp(find,"g"),replace)}}if(true){var pattern=new RegExp("[{][\\w:\\w\\-]+[}]","igm");String.prototype.build=function(o){if(!o){return this}var s=this;var m=s.match(pattern);if(m){for(var i=0,pos;i<m.length;i++){var match=m[i];var key=match.substring(1,match.length-1);var fn=((pos=key.indexOf(":"))>=0)?key.substring(pos+1):null;key=(pos>=0)?key.substring(0,pos):key;var value=(fn)?((typeof(o[fn])=="function")?o[fn].apply(this,[o[key],o,o]):o[key]):o[key];if(value==null||value==undefined){value=key}s=s.replaceAll(match,value)}}return s}}if(true){var string=function(str,len){var s="";var i=0;while(i++<len){s+=str}return s};String.prototype.zf=function(length){return string("0",length-this.length)+this}}Date.parseISO=function(string){var regexp="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";var d=string.match(new RegExp(regexp));var offset=0;var date=new Date(d[1],0,1);if(d[3]){date.setMonth(d[3]-1)}if(d[5]){date.setDate(d[5])}if(d[7]){date.setHours(d[7])}if(d[8]){date.setMinutes(d[8])}if(d[10]){date.setSeconds(d[10])}if(d[12]){date.setMilliseconds(Number("0."+d[12])*1000)}if(d[14]){offset=(Number(d[16])*60)+Number(d[17]);offset*=((d[15]=="-")?1:-1)}offset-=date.getTimezoneOffset();time=(Number(date)+(offset*60*1000));date.setTime(Number(time));return date};Date.prototype.format=function(f){if(!this.valueOf()){return" "}var weekName=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];var d=this;return f.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi,function($1){switch($1){case"yyyy":return d.getFullYear();case"yy":return(d.getFullYear()%1000).zf(2);case"MM":return(d.getMonth()+1).zf(2);case"dd":return d.getDate().zf(2);case"E":return weekName[d.getDay()];case"HH":return d.getHours().zf(2);case"hh":return((h=d.getHours()%12)?h:12).zf(2);case"mm":return d.getMinutes().zf(2);case"ss":return d.getSeconds().zf(2);case"a/p":return d.getHours()<12?"오전":"오후";default:return $1}})};Date.prototype.diff=function(d,m){var c=(1000*60*60*24);if(m=="sec"||m=="s"){c=1000}else{if(m=="min"||m=="m"){c=(1000*60)}else{if(m=="hour"||m=="h"){c=(1000*60*60)}else{if(m=="month"||m=="M"){return this.getMonth()-d.getMonth()}else{if(m=="year"||m=="y"){return this.getYear()-d.getYear()}}}}}return(this-d)/c};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(v,from){var length=this.length;if(typeof(from)!=="number"||from<0){return -1}for(var i=from;i<length;i++){if(this[i]===v){return i}}return -1}}if(!Array.prototype.contains){Array.prototype.contains=function(v){return(this.indexOf(v)>=0)}}if(!Array.prototype.forEach){Array.prototype.forEach=function(fn,scope){for(var i=0,len=this.length;i<len;++i){fn.call(scope,this[i],i,this)}}}if(!Array.prototype.remove){Array.prototype.remove=function(from,to){if(from&&typeof(from)!=="number"){from=this.indexOf(from)}if(to&&typeof(to)!=="number"){to=this.indexOf(to)}var rest=this.slice((to||from)+1||this.length);this.length=from<0?this.length+from:from;return this.push.apply(this,rest)}}if(!Array.isArray){Array.isArray=function isArray(obj){return Object.prototype.toString.call(obj)==="[object Array]"}}if(!global.Map){var Map=function(){this.k=[];this.v=[];this.size=0};Map.prototype={get:function(k){return this.v[this.k.indexOf(k)]},set:function(k,v){var i=this.k.indexOf(k);if(i>=0){this.k[i]=v}else{this.k.push(k);this.v.push(v)}this.size=this.k.length},remove:function(k){var i=this.k.indexOf(k);if(i>=0){this.k.remove(i);this.v.remove(i);this.size=this.k.length;return true}return false},has:function(k){return(this.k.indexOf(k)>=0)},indexOf:function(k){return this.k.indexOf(k)},keys:function(){return this.k},values:function(){return this.v},clear:function(){this.k=[];this.v=[];this.size=0}};Map.prototype.getKeyByValue=function(v){var argk=this.keys();var argv=this.values();return argk[argv.indexOf(v)]};global.Map=Map}if(!global.JSON){global.JSON={};(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}())}}());(function(){var a={toqry:function(f){if(!f||typeof(f)!="object"){return""}var e="";var g=true;for(var c in f){var b=f[c];var d=typeof(b);if(d=="string"||d=="number"||d=="boolean"){b=encodeURIComponent(b);if(c){e+=(((g)?"":"&")+c+"="+b)}g=false}}return e},get:function(b,d,c){if(!c&&typeof(d)=="function"){c=d}if(!b){if(c){c("url missing")}else{throw new Error("url missing")}}if(c){this.ajax(b).qry(d).get().complete(function(e,f){c(e,f)})}else{return this.ajax(b).qry(d).get().sync()}},string2xml:function(c){if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(c)}else{var d=new DOMParser();var b=d.parseFromString(c,"text/xml")}return b},ajax:function(e){var c=this;var d={debug:false,method:"get",url:e,timeout:10000,sync:false,cache:false,charset:"utf-8",parse:true,contentType:"application/json",accept:"application/json,text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"};var f=null;var g=function(){var x,m,v,p=false,n,k,w,u=false;f={complete:function(o){x.listeners.complete.push(o);x.commit();return this},success:function(o){x.listeners.success.push(o);x.commit();return this},error:function(o){x.listeners.error.push(o);x.commit();return this}};var j=d;if(j.debug){console.log("ajax '"+j.url+"'",j)}x={listeners:{complete:[],success:[],error:[]},complete:function(){var o=this.listeners.complete,z=arguments;if(o){o.forEach(function(A){if(typeof(A)==="function"){A.apply(A,z)}else{throw new Error("compolete listener is not a function.")}})}},success:function(){var o=this.listeners.success,z=arguments;if(o){o.forEach(function(A){if(typeof(A)==="function"){A.apply(A,z)}else{throw new Error("compolete listener is not a function.")}})}},error:function(){var o=this.listeners.error,z=arguments;if(o){o.forEach(function(A){if(typeof(A)==="function"){A.apply(A,z)}else{throw new Error("compolete listener is not a function.")}})}},commit:function(){if(p){if(j.debug){console.log("- "+j.url+" -----------------------------------")}if(j.debug){console.log("error:",m)}if(j.debug){console.log("payload:",v)}if(j.debug){console.log("status:",n)}if(j.debug){console.log("statusText:",k)}if(j.debug){console.log("contentType:",w)}if(j.debug){console.log("xhr:",y)}var z=v;if(z&&!u){if(j.parse!==false&&w&&w.indexOf("json")>=0&&z){try{var o=JSON.parse(z);z=o}catch(A){console.error("json parse error:",A.message,"[in "+i+"]")}}else{if(j.parse!==false&&w&&w.indexOf("xml")>=0&&z){z=c.string2xml(z)}}u=true}if(j.debug){console.log("data:",z)}if(j.interceptor){if(j.debug){console.log("call interceptor")}j.interceptor({config:j,error:m,xhr:j.xhr,payload:v,data:z,statusText:k,contentType:w,handler:this})}else{if(j.debug){console.log("call listeners")}if(m){this.error(m,z,v,y)}else{this.success(z,v,y)}this.complete(m,z,v,y)}}}};if(j.success){x.listeners.success.push(j.success)}if(j.error){x.listeners.error.push(j.error)}if(j.complete){x.listeners.complete.push(j.complete)}var i=j.url;var r=c.toqry(j.qry)||"";if(i.indexOf("?")>0){i+=((!j.cache?"&nc="+Math.random():"")+((r)?("&"+r):""))}else{i+=((!j.cache?"?nc="+Math.random():"")+((r)?("&"+r):""))}var y=new XMLHttpRequest();y.open(j.method,i,!j.sync);y.timeout=j.timeout;y.ontimeout=function(){m="timeout"};if(j.accept){y.setRequestHeader("Accept",j.accept)}var l=function(){v=y.responseText||"";n=y.status;k=y.statusText;w=y.getResponseHeader("Content-Type");p=true;if(y.readyState==4&&(y.status==200||y.status==204)){m=null}else{m=k||n}x.commit()};var t=function(){v=y.responseText||"";n=y.status;k=y.statusText;w=y.getResponseHeader("Content-Type");p=true;m=k||n||"unknown ajax error";x.commit()};if(y.addEventListener){y.addEventListener("load",l,false);y.addEventListener("error",t,false);y.addEventListener("abort",t,false)}else{y.onload=l;y.onerror=t;y.onabort=t}try{if(j.data){if(typeof(j.data)==="object"){j.data=JSON.stringify(j.data)}y.setRequestHeader("Content-Type",j.contentType+"; charset="+j.charset);y.send(j.data)}else{y.send()}}catch(q){m=q;n=-1;k="script error:"+q;p=true;x.commit()}if(j.sync===true){if(m){var s=new Error(m);s.payload=v;throw s}else{return v}}return f};if(typeof(e)==="object"){for(var b in e){d[b]=e[b]}return g()}return{qry:function(i){if(!i){return this}d.qry=i;return this},debug:function(i){if(i!==true&&i!==false){i=true}d.debug=i;return this},cache:function(i){if(i!==true&&i!==false){i=true}d.cache=i;return this},parse:function(i){if(i!==true&&i!==false){i=true}d.parse=i;return this},url:function(i){if(!i){return this}d.url=i;return this},contentType:function(i){if(!i){return this}d.contentType=i;return this},charset:function(i){if(!i){return this}d.charset=i;return this},accept:function(i){if(!i){return this}d.accept=i;return this},post:function(i){d.method="post";if(i){d.payload=i}return this},put:function(i){d.method="put";if(i){d.payload=i}return this},get:function(){d.method="get";return this},options:function(){d.method="options";return this},del:function(){d.method="delete";return this},interceptor:function(i){d.interceptor=i;return this},listeners:function(i){if(i.success){d.success=i.success}if(i.error){d.error=i.error}if(i.complete){d.complete=i.complete}return this},execute:function(){if(f){throw new Error("already executed")}return g()},sync:function(){if(f){throw new Error("already executed")}d.sync=true;return g()},complete:function(i){if(!f){g()}f.complete(i);return f},success:function(i){if(!f){g()}f.success(i);return f},error:function(i){if(!f){g()}f.error(i);return f}}}};window.Ajax=a})();(function(){var a=100;function c(e){this.id="event-dispatcher-"+a++;this.listeners(e)}c.prototype={listeners:function(g){if(!this._listeners){this._listeners={}}if(arguments.length<=0){return this._listeners}if(typeof(g)!=="object"){throw new Error("invalid listeners:"+g)}for(var e in g){if(!g.hasOwnProperty(e)){continue}if(e==="id"){if(g[e]){this.id=g[e]}}else{if(e==="scope"){this.eventScope(g[e])}else{if(e==="src"){this.eventSource(g[e])}else{var f=g[e];if(f){this.on(e,f,f.bubble,f.singleton)}}}}}},eventScope:function(e){if(arguments.length<=0){return this._listeners.scope||{}}this._listeners.scope=e},eventSource:function(e){if(arguments.length<=0){return this._listeners.src||this}this._listeners.src=e},on:function(i,g,f,j){if(i=="id"||i=="scope"||i=="src"){throw new Error("invalid action name:"+i)}if(!this._listeners){throw new Error("_listeners not defined. illegal state")}if(typeof(g)==="object"){g=g.handleEvent}if(!i||typeof(g)!="function"||i=="id"){throw new Error("invalid event handler")}var e=this._listeners;if(!e[i]){e[i]=[]}if(e[i].indexOf(g)===-1){if(j===true){if(e[i].length>0){return}}g.__bubble__=f;e[i].push(g);this.fireSync("event.on",{eventType:i,eventHandler:g,eventBubble:f})}return this},hasOn:function(j){if(j=="id"||j=="scope"||j=="src"){return false}if(!this._listeners){throw new Error("_listeners not defined. illegal state")}var f=this._listeners[j];if(f){for(var g=0;g<f.length;g++){var e=f[g];if(typeof(e)=="function"){return true}}}return false},un:function(k,j,f){if(k=="id"||k=="scope"||k=="src"){throw new Error("invalid action name:"+k)}if(!k){throw new Error("missing_parameter:action")}if(!this._listeners){throw new Error("_listeners not defined. illegal state")}if(typeof(j)!="function"){throw new Error("fn must be a function")}var e=this._listeners[k];if(e){for(var g=0;g<e.length;g++){if(e[g]===j&&f===e[g].__bubble__){this.fireSync("event.un",{eventType:k,eventHandler:e[g],eventBubble:e[g].__bubble__});delete e[g]}}}return this},fireSync:function(m,s,q){if(m=="id"||m=="scope"||m=="src"){throw new Error("invalid action name:"+m)}if(!m){throw new Error("missing_parameter:action")}if(!this._listeners){throw new Error("_listeners not defined. illegal state")}var j=this._listeners[m];var g=new b({});if(s){if(s.stopPropagation&&s.preventDefault){g.originalEvent=s}else{g.originalValues=s}for(var n in s){if(!s.hasOwnProperty(n)){continue}if(!g[n]){g[n]=s[n]}}}g.type=m;g.src=this.eventSource();if(j){for(var o=0;o<j.length;o++){var t=j[o];if(typeof(t)=="object"){t=t.handleEvent||t.handle}if(typeof(t)=="function"){try{var f=t.call(this.eventScope(),g)}catch(p){console.error("["+this.id+"]",'["'+p.message+'"]',t.toString())}if(f===false){g.preventDefault();g.stopPropagation()}}}}if(q){if(typeof(q)==="function"){q.apply(this,[g])}else{console.error("invalid event callback:",m,q);throw new Error("invalid event callback["+m+"/"+q+"]")}}return g},fire:function(i,f,g){if(i=="id"||i=="scope"||i=="src"){throw new Error("invalid action name:"+i)}var e=this;setTimeout(function(){e.fireSync(i,f,g)},0)}};var d=1;var b=function(e){this.timestamp=new Date().getTime();this.eventObjectId=d++;this.type=e.type;this.cancelable=((e.cancelable===true)?true:false);this.bubbles=((e.bubbles===true)?true:false);this.cancelBubble=false;this.src=e.src;this.returnValue=true;this.eventPrevented=false};b.prototype={preventDefault:function(){if(this.cancelable){this.returnValue=false;this.eventPrevented=true}if(this.originalEvent){this.originalEvent.preventDefault()}},stopPropagation:function(){this.cancelBubble=true;if(this.originalEvent){this.originalEvent.stopPropagation()}}};window.EventDispatcher=c})();(function(){var c=window.location.href;var i={};c.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(m,n,p,o){if(!n||o===undefined){return}if(o.indexOf("#")>=0){o=o.substring(0,o.lastIndexOf("#"))}if(i[n]!==undefined){if(!Array.isArray(i[n])){i[n]=[i[n]]}i[n].push(o)}else{i[n]=o}});var k=window.location.pathname;var a=k.substring(0,k.lastIndexOf("/")+1);var e=k.substring(k.lastIndexOf("/")+1);var j="";if(c.indexOf("?")>=0){j=c.substring(c.lastIndexOf("?")+1)}if(j.indexOf("#")>=0){j=j.substring(0,j.lastIndexOf("#"))}function b(){var m=window.location.hash;if(m&&m.startsWith("#")){m=m.substring(1)}return m}var k={url:window.location.href,path:window.location.pathname,hash:b(),pagename:e,base:a,qrystring:j,qry:i};function l(n){this.options=n||{};var m=this;this.path=k;this.on("load",function(p){var o=b();m.fireSync("hash",{prevhash:"",hash:o});if(m.hasOn("#"+o)){m.fireSync("#"+o,{prevhash:"",hash:o})}});this.on("ready",function(o){m.parse()})}l.prototype={partials:function(){return Partials},partial:function(m){return Partials.get(m)},change:function(o){if(o===this.path.hash){return}var m=this.path.hash;var n=this.path.hash=b();g.fireSync("hash",{prevhash:m,hash:n});if(this.hasOn("#"+m+".leave")){this.fireSync("#"+m+".leave",{prevhash:m,hash:n})}if(this.hasOn("#"+n)){this.fireSync("#"+n,{prevhash:m,hash:n})}},parse:function(){var A=this;var m=document.getElementsByTagName("partial");if(m){var o=function(E,F){var C=E.childNodes;for(var D=0;D<C.length;D++){if(C[D]===F){return D}}return -1};var x=[];for(var s=0;s<m.length;s++){var y=m[s].parentNode;var p=m[s];var u=o(y,p);var q=(p.previousSibling&&p.previousSibling.parentNode===y)?p.previousSibling:null;var t=(p.nextSibling&&p.nextSibling.parentNode===y)?p.nextSibling:null;x.push(p);var n=p.getAttribute("id");var B={};var z=p.attributes;if(z){for(var r=0;r<z.length;r++){var v=z[r];if(v.nodeName!=="id"){B[v.nodeName]=v.nodeValue}}}B.html=p.innerHTML;var w=A.partials().create(n,B);if(t){w.attachBefore(t)}else{w.attachTo(y)}}for(var s=0;s<x.length;s++){x[s].parentNode.removeChild(x[s])}}},dispatcher:function(){if(!this._dispatcher){this._dispatcher=new EventDispatcher({scope:this,src:this})}return this._dispatcher},on:function(o,n,m){return this.dispatcher().on(o,n,m)},un:function(o,n,m){return this.dispatcher().un(o,n,m)},hasOn:function(m){return this.dispatcher().hasOn(m)},fire:function(m,n){return this.dispatcher().fire(m,n)},fireSync:function(m,n){return this.dispatcher().fireSync(m,n)}};var g=window.page=new l();var f=function(o,n,m){if(window.addEventListener){if(o=="ready"){o="DOMContentLoaded"}window.addEventListener(o,n,((m===true)?true:false))}else{if(window.attachEvent){if(o=="ready"){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);if(n){n.apply(this,arguments)}}})}else{document.attachEvent("on"+o,n,((m===true)?true:false))}}}};if("onhashchange" in window&&window.onhashchange!=null){window.onhashchange=function(){g.change(window.location.hash)}}else{var d=window.location.hash;window.setInterval(function(){if(window.location.hash!=d){d=window.location.hash;g.change(window.location.hash)}},100)}f("ready",function(m){g.fireSync("ready",m)});f("load",function(m){g.fireSync("load",m)});f("resize",function(m){g.fire("resize",m)});g.fireSync("initialized")})();(function(){function isElement(o){if(!o){return false}if(!(window.attachEvent&&!window.opera)){return(o instanceof Element)}else{return(o.nodeType==1&&o.tagName)}}function isDefinedScript(src){return false}var tagname=new RegExp("([a-zA-Z]+)","igm");function findAll(qry){var el;if(qry==="body"){el=document.body}else{if(qry==="head"){el=document.head}else{if(qry==="html"){el=document.html}else{if(document.querySelectorAll){el=document.querySelectorAll(qry)}else{if(qry.startsWith("#")&&qry.indexOf(".")==-1&&qry.indexOf(" ")==-1&&qry.indexOf(":")==-1){el=document.getElementById(qry.substring(1))}else{if(qry.match(tagname)[0]===qry){el=document.getElementsByTagName(qry)}}}}}}if(!el){return null}if(typeof(el.length)==="number"){return el}else{return[el]}}function find(qry){var el=findAll(qry);if(el){return el[0]}return null}var Partials={cache:new Map(),create:function(id,options){if(!id){throw new Error("missing id")}if(Partials.get(id)){throw new Error("already exist partial id:"+id)}var partial=new Partial(id,options);Partials.cache.set(id,partial);return partial},get:function(id){return Partials.cache.get(id)},remove:function(id){Partials.cache.remove(id)}};var Partial=function(id,options){this.id=id;this.options=options=options||{};if(options.debug==="true"||options.debug===true){this.debug=true}this.reset()};Partial.prototype={reset:function(){if(this.debug){console.log("["+this.id+"] reset",this.options)}if(this.options.src){if(this.debug){console.log("["+this.id+"] reset.src",this.options.src)}this.src(this.options.src,true)}else{if(this.debug){console.log("["+this.id+"] reset.html",this.options.html)}this._src="";this.html((this.options.html||""))}},src:function(src,force){if(arguments.length<=0){return this._src}if(this.debug){console.log("["+this.id+"] src",src)}if(force||(src!==this._src)){if(this.debug){console.log("["+this.id+"] src changed",this._src,"->",src)}this._src=src;var payload=Ajax.ajax(src).contentType("text/html").get().cache(true).sync();this.parse(payload);if(this.debug){console.log("["+this.id+"] reattaching",this.attachMethod,this.attachTarget)}if(this.attachMethod==="append"){this.attachTo(this.attachTarget,this.attachReplace)}else{if(this.attachMethod==="before"){this.attachBefore(this.attachTarget)}}}else{if(this.debug){console.log("["+this.id+"] src not changed")}}return this},html:function(html){if(arguments.length<=0){return this._html}if(this.debug){console.log("["+this.id+"] html",html)}this._html=html;this.parse(html);if(this.debug){console.log("["+this.id+"] reattaching",this.attachMethod,this.attachTarget)}if(this.attachMethod==="append"){this.attachTo(this.attachTarget,this.attachReplace)}else{if(this.attachMethod==="before"){this.attachBefore(this.attachTarget)}}return this},parse:function(html){if(this.debug){console.log("["+this.id+"] parse",this.src())}try{var payload=html||"";this.scripts=[];this.elements=[];var container=document.createElement("div");container.innerHTML=payload;var tags=container.getElementsByTagName("script");if(tags){var toremove=[];for(var i=0;i<tags.length;i++){var os=tags[i];toremove.push(os);this.scripts.push({src:os.src,type:os.getAttribute("type"),charset:os.getAttribute("charset"),scope:os.getAttribute("scope"),singleton:os.getAttribute("singleton"),code:os.innerHTML})}for(var i=0;i<toremove.length;i++){toremove[i].parentNode.removeChild(toremove[i])}}tags=container.getElementsByTagName("style");if(tags){var toremove=[];for(var i=0;i<tags.length;i++){var os=tags[i];toremove.push(os);this.styles.push({type:os.getAttribute("type"),media:os.getAttribute("media"),scoped:os.getAttribute("scoped"),cssText:os.innerHTML})}for(var i=0;i<toremove.length;i++){toremove[i].parentNode.removeChild(toremove[i])}}tags=container.getElementsByTagName("link");if(tags){var toremove=[];for(var i=0;i<tags.length;i++){var os=tags[i];toremove.push(os);if(os.getAttribute("rel").toLowerCase()==="stylesheet"){this.styles.push({type:os.getAttribute("type"),media:os.getAttribute("media"),href:os.getAttribute("href")})}}for(var i=0;i<toremove.length;i++){toremove[i].parentNode.removeChild(toremove[i])}}var arg=container.childNodes;if(arg&&arg.length>0){for(var i=0;i<arg.length;i++){this.elements.push(arg[i])}}else{var text=document.createTextNode(container.innerText);this.elements.push(text)}if(this.debug){console.log("["+this.id+"] loaded",this.elements,this.scripts)}}catch(e){this.scripts=[];this.elements=[];console.error("["+this.id+"] error occured on load["+this.src()+"]",e.message)}return this},reload:function(){this.src(this.src(),true);return this},execute:function(){var arg=this.scripts;if(arg){if(this.attachedScripts){for(var i=0;i<this.attachedScripts.length;i++){var script=this.attachedScripts[i];script.parentNode.removeChild(script)}}this.attachedScripts=[];for(var i=0;i<arg.length;i++){var os=arg[i];if(os.singleton&&this.called){continue}if(os.src){var script=document.createElement("script");if(!isDefinedScript(os.src)){if(os.src){script.src=os.src}if(os.type){script.type=os.type}if(os.charset){script.charset=os.charset}document.head.appendChild(script);this.attachedScripts.push(script)}}else{if(os.code){var self=this;eval("(function(partial) {\n"+os.code+"\n})(self);")}}}this.called=true}},attachBefore:function(target){if(this.debug){console.log("["+this.id+"] attachBefore",target)}if(typeof(target)==="string"){target=find(target)}if(!target){throw new Error("invalid element:"+target)}this.detach();var els=this.elements;if(els){for(var i=0;i<els.length;i++){if(this.debug){console.log("["+this.id+"] insert before",els[i],"->",target)}target.parentNode.insertBefore(els[i],target);this.attached.push(els[i])}}this.execute();this.attachMethod="before";this.attachTarget=target;return this},attachTo:function(target,replace){if(this.debug){console.log("["+this.id+"] attachTo",target,"/replace",replace)}if(typeof(target)==="string"){target=find(target)}if(!target){throw new Error("invalid element:"+target)}this.detach();if(replace){target.innerHTML=""}var els=this.elements;if(els){for(var i=0;i<els.length;i++){if(this.debug){console.log("["+this.id+"] appending",els[i],"->",target)}target.appendChild(els[i]);this.attached.push(els[i])}}this.execute();this.attachMethod="append";this.attachTarget=target;this.attachReplace=replace;return this},detach:function(){if(this.debug){console.log("["+this.id+"] detach")}var attached=this.attached;if(attached){for(var i=0;i<attached.length;i++){var a=attached[i];a.parentNode.removeChild(a)}}this.attached=[];this.attachMethod=null;this.attachTarget=null;this.attachReplace=null;return this},remove:function(){if(this.debug){console.log("["+this.id+"] remove",target)}this.detach();Partials.remove(this.id)}};window.Partials=Partials})();